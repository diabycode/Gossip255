{% extends 'gossip225/base.html' %}
<!-- {% load static %} -->

{% block head_content %}
    <title>Gossip225/Post</title>
    <script src="https://unpkg.com/htmx.org@1.8.5"></script>
    <link rel="stylesheet" href="{% static 'css/post/fill.css' %}">
{% endblock %}

{% block body_container %}
    <div class="page-container">
            
        <div class="column left-container">
            <div>
                <svg width="150" height="150" viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_1_10)">
                        <path d="M356.817 330.818C357.407 330.696 357.755 330.084 357.553 329.516C348.069 302.917 327.709 279.428 299.532 262.612C270.978 245.57 235.991 236.333 200 236.333C164.008 236.333 129.021 245.57 100.467 262.612C72.2901 279.428 51.9301 302.916 42.4459 329.516C42.2436 330.083 42.5921 330.695 43.1818 330.818L191.839 361.799C197.221 362.921 202.778 362.921 208.16 361.799L356.817 330.818Z" fill="#D8DCDF"/>
                        <circle cx="200" cy="127.333" r="90.8333" fill="#D8DCDF"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_1_10">
                            <rect width="400" height="400" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
                <p><a href="{% url 'account:profile' request.user.username %}">{{ request.user.username }}</a></p>
                <p>membre depuis</p>
                <p>{{ request.user.joindate.date }}</p>

            </div>
        </div>

        
        <div class="post-container">
            {% for post in posts %}
                <div class="post">

                    <!-- post-image -->
                    {% if post.thumbnail %}
                    <div class="thumb">
                        <img src="{{ post.thumbnail.url }}" alt="Image rattachÃ©">
                    </div>
                    {% endif %}

                    <div class="post-content">
                        <!-- details -->
                        <div class="p-details">
                            <p> {{ post.content }}</p>
                            <p>
                                <b><a href="{% url 'account:profile' post.author.username %}">{{ post.author }}</a></b>
                                 {{ post.create_on }} 
                            </p>
                        </div>

                        <!-- vote and comments count  -->
                        <div class="stats">
                            <div>
                                <span id="post_{{ post.id }}"> {{ post.vote_count }} </span>
                                <svg width="20" height="20" viewBox="0 0 386 358" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M152.542 65.6311C169.687 24.5437 178.259 4.00003 193 4.00003C207.741 4.00004 216.313 24.5437 233.458 65.6311L234.256 67.5444C243.942 90.7567 248.785 102.363 258.655 109.417C268.525 116.472 281.482 117.587 307.395 119.818L312.08 120.221C354.49 123.873 375.695 125.698 380.232 138.667C384.77 151.636 369.022 165.409 337.526 192.955L327.015 202.148C311.071 216.092 303.099 223.064 299.384 232.202C298.69 233.907 298.114 235.653 297.659 237.43C295.216 246.956 297.551 257.071 302.22 277.299L303.673 283.596C312.253 320.772 316.543 339.361 309.053 347.378C306.254 350.374 302.616 352.531 298.574 353.591C287.759 356.428 272.405 344.401 241.696 320.346C221.531 304.55 211.449 296.652 199.873 294.875C195.32 294.177 190.68 294.177 186.127 294.875C174.551 296.652 164.469 304.55 144.304 320.346C113.595 344.401 98.2405 356.428 87.4255 353.591C83.3842 352.531 79.7463 350.374 76.9472 347.378C69.4565 339.361 73.7467 320.772 82.3271 283.596L83.7803 277.299C88.4492 257.071 90.7836 246.956 88.3413 237.43C87.8857 235.653 87.3095 233.907 86.6164 232.202C82.9008 223.064 74.929 216.092 58.9853 202.148L48.4737 192.955C16.9781 165.409 1.23025 151.636 5.76764 138.667C10.305 125.698 31.5101 123.873 73.9204 120.221L78.6051 119.818C104.518 117.587 117.475 116.472 127.345 109.417C137.215 102.363 142.058 90.7567 151.744 67.5443L152.542 65.6311Z" stroke="#11111B" stroke-width="8"/>
                                </svg>
                            </div>

                            <div>
                                <span>{{ post.comment_set.all.count }}</span>
                                <svg width="20" height="20" viewBox="0 0 367 343" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4.3597 5.73337L7.92372 7.54933L7.92372 7.54933L4.3597 5.73337ZM4.80091 338.324L7.62931 341.153L7.62934 341.153L4.80091 338.324ZM361.329 266.987L359.513 263.423L359.513 263.423L361.329 266.987ZM362.64 265.676L359.076 263.86L359.076 263.86L362.64 265.676ZM362.64 5.73337L359.076 7.54937L359.076 7.5494L362.64 5.73337ZM361.329 4.42232L363.145 0.858295L363.145 0.85827L361.329 4.42232ZM5.67074 4.42232L7.48671 7.98634L7.48671 7.98634L5.67074 4.42232ZM75.5185 267.607L72.6901 264.778L75.5185 267.607ZM8.03271 8.89532C8.03271 8.46615 8.03282 8.13275 8.03733 7.84556C8.04185 7.55825 8.05017 7.37469 8.0603 7.25067C8.08096 6.99778 8.09543 7.21233 7.92372 7.54933L0.795669 3.9174C0.296978 4.89614 0.147955 5.85159 0.0868719 6.59921C0.029604 7.30013 0.0327148 8.12125 0.0327148 8.89532H8.03271ZM8.03271 147.661V8.89532H0.0327148V147.661H8.03271ZM0.0327148 147.661V267.306H8.03271V147.661H0.0327148ZM0.0327148 267.306V267.314H8.03271V267.306H0.0327148ZM0.0327148 267.314V338.006H8.03271V267.314H0.0327148ZM0.0327148 338.006C0.0327148 341.971 4.82593 343.956 7.62931 341.153L1.97252 335.496C4.20892 333.26 8.03271 334.844 8.03271 338.006H0.0327148ZM7.62934 341.153L78.347 270.435L72.6901 264.778L1.97248 335.496L7.62934 341.153ZM358.167 263.314H76.2256V271.314H358.167V263.314ZM359.513 263.423C359.85 263.251 360.065 263.266 359.812 263.286C359.688 263.297 359.504 263.305 359.217 263.309C358.93 263.314 358.596 263.314 358.167 263.314V271.314C358.941 271.314 359.762 271.317 360.463 271.26C361.211 271.199 362.166 271.05 363.145 270.551L359.513 263.423ZM359.076 263.86C359.172 263.672 359.325 263.519 359.513 263.423L363.145 270.551C364.462 269.88 365.533 268.809 366.204 267.492L359.076 263.86ZM358.967 262.514C358.967 262.943 358.967 263.277 358.963 263.564C358.958 263.851 358.95 264.035 358.94 264.159C358.919 264.412 358.905 264.197 359.076 263.86L366.204 267.492C366.703 266.513 366.852 265.558 366.913 264.81C366.97 264.109 366.967 263.288 366.967 262.514H358.967ZM358.967 8.89534V262.514H366.967V8.89534H358.967ZM359.076 7.5494C358.905 7.21237 358.919 6.99781 358.94 7.25069C358.95 7.3747 358.958 7.55826 358.963 7.84557C358.967 8.13276 358.967 8.46616 358.967 8.89534H366.967C366.967 8.12126 366.97 7.30013 366.913 6.5992C366.852 5.85157 366.703 4.89609 366.204 3.91734L359.076 7.5494ZM359.513 7.98634C359.325 7.89044 359.172 7.73744 359.076 7.54937L366.204 3.91736C365.533 2.60032 364.462 1.52944 363.145 0.858295L359.513 7.98634ZM358.167 8.09534C358.596 8.09534 358.93 8.09544 359.217 8.09995C359.504 8.10447 359.688 8.11279 359.812 8.12293C360.065 8.14359 359.85 8.15805 359.513 7.98637L363.145 0.85827C362.166 0.359602 361.211 0.210578 360.463 0.149494C359.762 0.0922261 358.941 0.0953369 358.167 0.0953369V8.09534ZM8.83271 8.09534H358.167V0.0953369H8.83271V8.09534ZM7.48671 7.98634C7.1497 8.15806 6.93516 8.14359 7.18805 8.12293C7.31207 8.11279 7.49564 8.10447 7.78295 8.09995C8.07014 8.09544 8.40354 8.09534 8.83271 8.09534V0.0953369C8.05864 0.0953369 7.23752 0.0922261 6.53659 0.149494C5.78897 0.210577 4.83352 0.359599 3.85478 0.858291L7.48671 7.98634ZM7.92372 7.54933C7.82785 7.73749 7.67487 7.89047 7.48671 7.98634L3.85478 0.858291C2.53765 1.5294 1.46678 2.60027 0.795669 3.9174L7.92372 7.54933ZM78.347 270.435C77.7843 270.998 77.0213 271.314 76.2256 271.314V263.314C74.8995 263.314 73.6278 263.841 72.6901 264.778L78.347 270.435Z" fill="#11111B"/>
                                </svg>
                                    
                            </div>
                            <p><a href="{% url 'post:details' pk=post.pk %}">voir</a></p>
                            
                            <!-- <a href="{% url 'post:details' pk=post.pk %}"> -->
                            <!-- <object class="icon" data="../../static/icons/post/vote-icon.svg" type="image/svg+xml" width="20" height="20"> </object> -->
                        </div>
                        
                        <div class="reaction">

                            <!-- vote -->
                            <form action="">
                                {% csrf_token %}
                                <button hx-post="{% url 'reactions:update_vote' post.pk %}"  hx-trigger="click" hx-target="#post_{{ post.id }}">
                                    <svg width="40" height="40" viewBox="0 0 386 358" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M152.542 65.6311C169.687 24.5437 178.259 4.00003 193 4.00003C207.741 4.00004 216.313 24.5437 233.458 65.6311L234.256 67.5444C243.942 90.7567 248.785 102.363 258.655 109.417C268.525 116.472 281.482 117.587 307.395 119.818L312.08 120.221C354.49 123.873 375.695 125.698 380.232 138.667C384.77 151.636 369.022 165.409 337.526 192.955L327.015 202.148C311.071 216.092 303.099 223.064 299.384 232.202C298.69 233.907 298.114 235.653 297.659 237.43C295.216 246.956 297.551 257.071 302.22 277.299L303.673 283.596C312.253 320.772 316.543 339.361 309.053 347.378C306.254 350.374 302.616 352.531 298.574 353.591C287.759 356.428 272.405 344.401 241.696 320.346C221.531 304.55 211.449 296.652 199.873 294.875C195.32 294.177 190.68 294.177 186.127 294.875C174.551 296.652 164.469 304.55 144.304 320.346C113.595 344.401 98.2405 356.428 87.4255 353.591C83.3842 352.531 79.7463 350.374 76.9472 347.378C69.4565 339.361 73.7467 320.772 82.3271 283.596L83.7803 277.299C88.4492 257.071 90.7836 246.956 88.3413 237.43C87.8857 235.653 87.3095 233.907 86.6164 232.202C82.9008 223.064 74.929 216.092 58.9853 202.148L48.4737 192.955C16.9781 165.409 1.23025 151.636 5.76764 138.667C10.305 125.698 31.5101 123.873 73.9204 120.221L78.6051 119.818C104.518 117.587 117.475 116.472 127.345 109.417C137.215 102.363 142.058 90.7567 151.744 67.5443L152.542 65.6311Z" stroke="#11111B" stroke-width="8"/>
                                    </svg>
                                </button>
                            </form>

                            <!-- actions -->
                            {% if post.author == request.user %}
                                <p>
                                    <a href="{% url 'post:edit' pk=post.pk %}">modifier</a>
                                    <a href="{% url 'post:delete' pk=post.pk %}" style="color: red;">supprimer</a>
                                </p>
                            {% endif %}
                        </div>
                    </div>

                </div>
            {% endfor %}
        </div>
        <div class="column right-container">
            <div></div>
        </div>
    </div>
{% endblock %}

